<div ng-include src="'partials/navbar.html'"></div>

<form name="form" novalidate>

  <table class="table table-striped table-condensed">
    <thead>
      <tr>
        <th>Messstellennummer</th>
        <th>Gerätetyp</th>
        <th>Vorgänger (Messstellen)</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="location in locations" name="{{location.number}}">
        <td>
          <input  type="text" class="input-mini"
                  ng-model="location.number" ng-model-onblur ng-change="updateLocationNumber(location)"/>
        </td>
        <td><input type="text" ng-model="location.type" class="input-mini"/></td>
        <td>
          <input  type="text"
                  ng-model="location.parentNumbers" ng-list ng-model-onblur
                  ng-change="validateParentLocations(location)" />
          <div style="color: red" ng-show="location.missingParents.length > 0">
            Missing parents: {{location.missingParents}}
          </div>
        </td>
        <td><pre style="font-size: 10px; padding:0px; margin:0px;line-height:10px">{{location | json}}</pre></td>
      </tr>
    </tbody>
  </table>

  <button ng-click="save()" class="btn btn-primary">Speichern</button>
  <button ng-click="reset()" class="btn">Reset</button>
</form>

<hr />
<pre>form = {{locations | json}}</pre>
